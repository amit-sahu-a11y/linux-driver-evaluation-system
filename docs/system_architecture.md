# 🏗️ System Architecture: Linux Device Driver Evaluation Framework

## 🎯 Objective

The system is designed to automatically evaluate Linux device driver code generated by AI coding models. It scores code on functionality, correctness, style, security, and performance using static and dynamic analysis.

---

## 🧩 Components Overview

### 1. **Input Layer**
- **Input**: C code file (driver) generated by an LLM or human.
- **Source Folder**: `code_samples/`
- **Interface**: CLI or Python script (`run_evaluation.py`)

---

### 2. **Evaluation Pipeline**

#### 🧪 a. Compilation Module (`evaluation/compile_and_score.py`)
- Compiles the driver using `gcc`.
- Captures:
  - Compilation success/failure
  - Number of warnings and errors
- Assigns quantitative scores.

#### 🔍 b. Static Analysis Module (`evaluation/static_analysis.py`)
- Parses C code for:
  - Security issues (buffer overflows, race conditions)
  - Style compliance (tabs, line length, naming)
  - Maintainability and documentation
- Can be extended to use `clang-tidy`, regex, or custom parsers.

#### 📊 c. Metrics & Scoring (`evaluation/metrics.py`)
- Holds structured rubrics for:
  - Compilation
  - Functionality
  - Security
  - Code Quality
  - Performance
- Each category has sub-scores and a final weighted score.

---

### 3. **Reporting Engine**
- Consolidates the evaluation into a single `JSON` report.
- Output folder: `reports/`
- Example: `evaluation_output.json`

---

## 🔁 Workflow Diagram

```text
+------------------+
| Input Driver C   |
| File (.c)        |
+--------+---------+
         |
         v
+--------+---------+       +-----------------------+
| Compilation &     |----->| Compilation Metrics    |
| Warning Detection |       +-----------------------+
+--------+---------+
         |
         v
+--------+---------+       +------------------------+
| Static Analyzer   |----->| Security & Style Scores |
| (Regex / clang)   |       +------------------------+
+--------+---------+
         |
         v
+-------------------------+
| Scoring & Aggregation   |
+-------------------------+
         |
         v
+-------------------------+
| Final Report (JSON)     |
+-------------------------+
